---
import { projectTypes } from "../../../content/config";
import { loadAndFormatCollection } from "../../../util/collection";
import Projects from "../../../components/Projects.astro";

export async function getStaticPaths() {
    return projectTypes.map((type: string) => ({
        params: { type: type.toLocaleLowerCase() }
    }))
}

const { type } = Astro.params;

let projects: any[] = (await loadAndFormatCollection("projects", false)).sort(
    (a: any, b: any) => a.data.weight - b.data.weight,
)

projects = projects.filter((project: any) => (project.data.type as string).localeCompare(type, undefined, { sensitivity: 'base' }) === 0)
---

<Projects projects={projects} typeFilter={type} />