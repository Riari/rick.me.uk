---
import { render } from "astro:content";

import Project from "../../../layouts/Project.astro";
import { loadAndFormatCollection } from "../../../scripts/utils/collection";

export async function getStaticPaths() {
    const projects = await loadAndFormatCollection('projects', false);

    return projects
        .map((project: any) => {
            return {
                params: { slug: project.relativeURL },
                props: { project }
            }
        });
}

const { project } = Astro.props;
const { Content } = await render(project);
---

<Project {...project.data}>
    <Content />
</Project>