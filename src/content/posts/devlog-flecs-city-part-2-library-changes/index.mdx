---
title: "Devlog: Flecs City (Part 2)"
description: "Library changes"
pubDate: 2025-09-15
heroImage: "../../../images/post-headers/pixellated-code.png"
tags: ["devlog", "cpp", "flecs", "ecs"]
---
import ExternalLink from "../../../components/ExternalLink.astro";
import OpenGraphSummary from "../../../components/OpenGraphSummary.astro";

It's been a while since I [last posted back in May](/posts/2025/05/devlog-flecs-city-part-2-library-changes/). A lot has happened since then: Hytale was cancelled, I was back in the job market for the first time in eight years, and I was lucky enough to catch the interest of a few other studios, one of which I accepted an offer from. I'm now working full time on an Unreal Engine project.

Now that I'm somewhat settled into that job, I decided to revisit this project. In recent months I've spent a lot of time in Unity and Unreal building up my skills and portfolio, but I was keen to get back into writing some lower level C++, so here I am.

In the previous post, I mentioned a bug with GameNetworkingSockets on Linux, which I <ExternalLink url="https://github.com/ValveSoftware/GameNetworkingSockets/issues/380">reported here</ExternalLink>. I've not been able to figure this one out and don't feel like investigating it further, so I decided to replace GNS with <ExternalLink url="https://github.com/lsalzman/enet">ENet</ExternalLink>, which is a popular UDP library that has been around for many years and should be more than enough for my purposes. Of course it lacks the Steam integration, but I don't need that for this project.

Switching to it was not the smoothest experience because it uses windows.h on Windows, leading to conflicts in function names from Raylib, an issue that has been discussed at length in <ExternalLink url="https://github.com/raysan5/raylib/issues/1217">this GitHub issue</ExternalLink>. For reasons that aren't very clear to me, the author of Raylib is adamant about not prefixing the library's function names (despite that being a common practice in C where namespacing doesn't exist). As is his right, of course! It's still an excellent library, but this is an annoying thing to have to deal with.

Anyway, to work around that issue, I found it was enough to set a few definitions via CMake:

```cmake
if(WIN32)
    target_link_libraries(CoreDependencies INTERFACE winmm ws2_32)
    target_compile_definitions(CoreDependencies INTERFACE
        WIN32_LEAN_AND_MEAN
        NOGDI
        NOUSER
    )
endif()
```

This seems to give ENet everything it needs while avoiding the declarations that upset Raylib.

